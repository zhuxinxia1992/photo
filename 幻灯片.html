<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>旅行游记</title>
<link href="css/change.css" rel="stylesheet"/>
<script type="text/javascript" src="js/change.js"></script>
<script>
window.onload=function()
{
	var oDiv=document.getElementById('box');
	var aPicLi=document.getElementById('pic_list').getElementsByTagName('li');
	var aTxtLi=document.getElementById('text_list').getElementsByTagName('li');
	var oIcoUl=document.getElementById('ico_list').getElementsByTagName('ul')[0];
	var aIcoLi=document.getElementById('ico_list').getElementsByTagName('li');
	var oBtnPrev=document.getElementById('btn_prev');
	var oBtnNext=document.getElementById('btn_next');
	var iNowUlLeft=0;
	var iNow=0;
	var i=0;
	
	oBtnPrev.onclick=function()
	{
		if(iNowUlLeft>0)
		{
			iNowUlLeft--;
			//oIcoUl.style.left=-aIcoLi[0].offsetWidth*iNowUlLeft+'px';   //ul移动的距离
			fixUlLeft();
		}	
	};
	
	function fixUlLeft()                                                    //调整ul的值
	{
		oBtnPrev.className=iNowUlLeft==0?'btn':'btn showBtn';
		oBtnNext.className=iNowUlLeft==(aIcoLi.length-7)?'btn':'btn showBtn';
		StartMove(oIcoUl,{left:-aIcoLi[0].offsetWidth*iNowUlLeft},MOVE_TYPE.BUFFER);
	}
	
	oBtnNext.onclick=function()
	{
		if(iNowUlLeft<aIcoLi.length-7)
		{
			iNowUlLeft++;
			//oIcoUl.style.left=-aIcoLi[0].offsetWidth*iNowUlLeft+'px';
			fixUlLeft();
		}
	};
	
	for(i=0;i<aIcoLi.length;i++)
	{
		aIcoLi[i].index=i;                                  //索引值
		aIcoLi[i].onclick=function()
		{
			if(iNow == this.index)
			{
				return;
			}
			
			iNow=this.index;
			
			tab();
		};
	}
	
	function tab()
	{
		for(i=0;i<aIcoLi.length;i++)
		{
			aIcoLi[i].className='';
			aTxtLi[i].getElementsByTagName('h2')[0].className='';
			aPicLi[i].style.filter='alpha(opacity:0)';           //让所有的图片透明度都为0
			aPicLi[i].style.opacity=0;
			StopMove(aPicLi[i]);
		}
		aIcoLi[iNow].className='active';
		aTxtLi[iNow].getElementsByTagName('h2')[0].className='show';
		//aPicLi[this.index].style.filter='alpha(opacity:100)';   //当前this.index的透明度为100
		//aPicLi[this.index].style.opacity=1;                     //火狐浏览器兼容，让其透明度也为1
		StartMove(aPicLi[iNow],{opacity:100},MOVE_TYPE.BUFFER);
	}
	
	function autoPlay()      //自动播放，用定时器控制
	{             
		iNow++;
		
		if(iNow>=aIcoLi.length)
		{
			iNow=0;
		}
		
		if(iNow<iNowUlLeft)
		{
			iNowUlLeft=iNow;
		}
		else if(iNow>=iNowUlLeft+7)
		{
			iNowUlLeft=iNow-6;
		}
		
		fixUlLeft();
		
		tab();
	}
	
	var timer=setInterval(autoPlay,3000);               //定时器控制，3秒
	
	oDiv.onmouseover=function()
	{
		clearInterval(timer);
	};
	
	oDiv.onmouseout=function()
	{
		timer=setInterval(autoPlay,3000);
	};
};
</script>
</head>

<body>
<div id="box">
	<ul id="pic_list">
		<li style="z-index:2;opacity:1;fliter:alpha(opacity=100);">
			<a href="#"><img src="img/pic_1.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_2.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_3.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_4.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_5.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_6.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_7.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_8.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_9.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_10.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_11.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_12.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_13.jpg" alert="我的主页"/></a>
		</li>
		<li>
			<a href="#"><img src="img/pic_14.jpg" alert="我的主页"/></a>
		</li>
	</ul>
	
	<div class="mask"></div>
	
	<ul id="text_list">
		<li><h2 class="show"><a href="#"></a></h2></li>		
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
		<li><h2><a href="#"></a></h2></li>
	</ul>
	<div id="ico_list">
		<ul>                                                <!--让小图片移动，变得是ul的left-->
			<li class="active"><a href="#"><img src="img/ico_1.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_2.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_3.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_4.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_5.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_6.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_7.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_8.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_9.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_10.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_11.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_12.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_13.jpg" alt="我的学习"/></a></li>
			<li><a href="#"><img src="img/ico_14.jpg" alt="我的学习"/></a></li>
		</ul>
	</div>
	<a href="#" id="btn_prev" class="btn"></a>
	<a href="#" id="btn_next" class="btn showBtn"></a>
</div>
</body>
</html>
